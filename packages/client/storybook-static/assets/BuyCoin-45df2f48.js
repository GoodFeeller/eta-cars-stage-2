import{j as a}from"./jsx-runtime-ffb262ed.js";import{r as c}from"./index-76fb7be0.js";import{A as _}from"./AddContext-9725df13.js";const y="_content_1o7mm_1",f="_title_1o7mm_10",g="_coinName_1o7mm_16",N="_price_1o7mm_30",b="_buyBlock_1o7mm_35",S="_correct_1o7mm_64",C="_error_1o7mm_70",m={content:y,title:f,coinName:g,price:N,buyBlock:b,correct:S,error:C};function P(t){const[o,l]=c.useState("0"),{setCoin:r}=c.useContext(_);return{count:o,setCount:l,buy:()=>{const i=localStorage.getItem("//profile//"),n=localStorage.getItem(t.id),s={symbol:t.symbol,id:t.id,count:Number(o),totalPrice:Number(o)*Number(t.priceUsd)};if(n!=null){const e=JSON.parse(n);s.totalPrice+=e.totalPrice,s.count+=e.count}if(localStorage.setItem(t.id,JSON.stringify(s)),i==null){const e={id:[t.id],totalPrice:s.totalPrice};localStorage.setItem("//profile//",JSON.stringify(e))}else{const e=JSON.parse(i);e.id.some(p=>p===t.id)?localStorage.setItem("//profile//",JSON.stringify({totalPrice:e.totalPrice+s.totalPrice,id:e.id})):localStorage.setItem("//profile//",JSON.stringify({totalPrice:e.totalPrice+s.totalPrice,id:[...e.id,t.id]}))}r(null),window.dispatchEvent(new Event("storage"))}}}const d=({coin:t})=>{const[o,l]=c.useState(!1),{count:r,setCount:u,buy:i}=P(t);return c.useEffect(()=>l(r.split("").some(n=>isNaN(Number.parseInt(n)))),[r]),a.jsxs("div",{className:m.buyBlock,children:[a.jsx("input",{name:"Count",className:o?m.error:m.correct,type:"text",maxLength:4,onChange:n=>u(n.target.value),value:r}),a.jsx("button",{onClick:()=>i(),disabled:o||r.length===0,children:"Buy"})]})};try{d.displayName="BuyCoin",d.__docgenInfo={description:"",displayName:"BuyCoin",props:{coin:{defaultValue:null,description:"",name:"coin",required:!0,type:{name:"ICoin"}}}}}catch{}export{d as B,m as s};
//# sourceMappingURL=BuyCoin-45df2f48.js.map
